{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useDispatch}from\"react-redux\";import{editCard,archiveCard}from\"../../actions/board\";import{Modal,TextField,Button,CircularProgress}from\"@material-ui/core\";import CloseIcon from\"@material-ui/icons/Close\";import useStyles from\"../../utils/modalStyles\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CardModal=_ref=>{let{cardId,open,setOpen,card,list}=_ref;const classes=useStyles();const[title,setTitle]=useState(card.title);const[description,setDescription]=useState(card.description);const[file,setFile]=useState(null);const[fileURL,setFileURL]=useState(\"\");const[loading,setLoading]=useState(false);const dispatch=useDispatch();useEffect(()=>{setTitle(card.title);setDescription(card.description);},[card]);const onTitleDescriptionSubmit=async e=>{e.preventDefault();dispatch(editCard(cardId,{title,description}));};const onArchiveCard=async()=>{dispatch(archiveCard(cardId,true));setOpen(false);};const onFileChange=e=>{setFile(e.target.files[0]);};const uploadFile=async()=>{if(file){setLoading(true);try{const formData=new FormData();formData.append(\"multimedia\",file);// Aquí debes realizar la llamada a tu servidor para subir el archivo\n// Reemplaza esta llamada ficticia con tu lógica real de carga de archivos\n// Supongamos que la URL de tu endpoint de carga de archivos es '/api/upload'\nconst response=await fetch(\"/api/upload\",{method:\"POST\",body:formData});if(response.ok){const data=await response.json();setFileURL(data.url);}else{console.error(\"Error al subir el archivo\");}}catch(error){console.error(\"Error al subir el archivo:\",error);}finally{setLoading(false);}}};return/*#__PURE__*/_jsx(Modal,{open:open,onClose:()=>setOpen(false),children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.paper,\" \").concat(classes.cardModal),children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>onTitleDescriptionSubmit(e),children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.modalTop,children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,multiline:true,label:\"Card title\",value:title,onChange:e=>setTitle(e.target.value),onKeyPress:e=>e.key===\"Enter\"&&onTitleDescriptionSubmit(e),className:classes.cardTitle}),/*#__PURE__*/_jsx(Button,{onClick:()=>setOpen(false),children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,multiline:true,label:\"Card description\",value:description,onChange:e=>setDescription(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:onFileChange}),loading&&/*#__PURE__*/_jsx(CircularProgress,{}),fileURL&&/*#__PURE__*/_jsx(\"a\",{href:fileURL,target:\"_blank\",children:file.name}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:uploadFile,children:\"Subir archivo\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",disabled:title===card.title&&(description===card.description||description===\"\"&&!card.description),className:classes.button,children:\"Guardar todos los cambios\"})]})})});};export default CardModal;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","editCard","archiveCard","Modal","TextField","Button","CircularProgress","CloseIcon","useStyles","jsx","_jsx","jsxs","_jsxs","CardModal","_ref","cardId","open","setOpen","card","list","classes","title","setTitle","description","setDescription","file","setFile","fileURL","setFileURL","loading","setLoading","dispatch","onTitleDescriptionSubmit","e","preventDefault","onArchiveCard","onFileChange","target","files","uploadFile","formData","FormData","append","response","fetch","method","body","ok","data","json","url","console","error","onClose","children","className","concat","paper","cardModal","onSubmit","modalTop","variant","margin","required","fullWidth","multiline","label","value","onChange","onKeyPress","key","cardTitle","onClick","type","href","name","color","disabled","button"],"sources":["D:/David/Escritorio/CHAMBA/Gestor-de-proyectos/frontend/client/src/components/card/CardModal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { editCard, archiveCard } from \"../../actions/board\";\r\nimport { Modal, TextField, Button, CircularProgress } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../../utils/modalStyles\";\r\n\r\nconst CardModal = ({ cardId, open, setOpen, card, list }) => {\r\n  const classes = useStyles();\r\n  const [title, setTitle] = useState(card.title);\r\n  const [description, setDescription] = useState(card.description);\r\n  const [file, setFile] = useState(null);\r\n  const [fileURL, setFileURL] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setTitle(card.title);\r\n    setDescription(card.description);\r\n  }, [card]);\r\n\r\n  const onTitleDescriptionSubmit = async (e) => {\r\n    e.preventDefault();\r\n    dispatch(editCard(cardId, { title, description }));\r\n  };\r\n\r\n  const onArchiveCard = async () => {\r\n    dispatch(archiveCard(cardId, true));\r\n    setOpen(false);\r\n  };\r\n\r\n  const onFileChange = (e) => {\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  const uploadFile = async () => {\r\n    if (file) {\r\n      setLoading(true);\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append(\"multimedia\", file);\r\n\r\n        // Aquí debes realizar la llamada a tu servidor para subir el archivo\r\n        // Reemplaza esta llamada ficticia con tu lógica real de carga de archivos\r\n        // Supongamos que la URL de tu endpoint de carga de archivos es '/api/upload'\r\n        const response = await fetch(\"/api/upload\", {\r\n          method: \"POST\",\r\n          body: formData,\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setFileURL(data.url);\r\n        } else {\r\n          console.error(\"Error al subir el archivo\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error al subir el archivo:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal open={open} onClose={() => setOpen(false)}>\r\n      <div className={`${classes.paper} ${classes.cardModal}`}>\r\n        <form onSubmit={(e) => onTitleDescriptionSubmit(e)}>\r\n          <div className={classes.modalTop}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              multiline\r\n              label=\"Card title\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              onKeyPress={(e) =>\r\n                e.key === \"Enter\" && onTitleDescriptionSubmit(e)\r\n              }\r\n              className={classes.cardTitle}\r\n            />\r\n            <Button onClick={() => setOpen(false)}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </div>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            multiline\r\n            label=\"Card description\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          />\r\n          <input type=\"file\" onChange={onFileChange} />\r\n          {loading && <CircularProgress />}\r\n          {fileURL && (\r\n            <a href={fileURL} target=\"_blank\">\r\n              {file.name}\r\n            </a>\r\n          )}\r\n          <Button variant=\"contained\" color=\"secondary\" onClick={uploadFile}>\r\n            Subir archivo\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={\r\n              title === card.title &&\r\n              (description === card.description ||\r\n                (description === \"\" && !card.description))\r\n            }\r\n            className={classes.button}\r\n          >\r\n            Guardar todos los cambios\r\n          </Button>\r\n        </form>\r\n        {/* Resto del contenido del modal */}\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nCardModal.propTypes = {\r\n  cardId: PropTypes.string.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  card: PropTypes.object.isRequired,\r\n  list: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default CardModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}