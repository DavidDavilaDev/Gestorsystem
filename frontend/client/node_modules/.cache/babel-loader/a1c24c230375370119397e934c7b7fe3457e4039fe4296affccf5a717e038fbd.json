{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jessi\\\\OneDrive\\\\Escritorio\\\\PRACTICAS SAID\\\\contenedor padlet\\\\padlet\\\\frontend\\\\client\\\\src\\\\components\\\\card\\\\CardModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { editCard, archiveCard } from \"../../actions/board\";\nimport { Modal, TextField, Button, CircularProgress } from \"@material-ui/core\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport useStyles from \"../../utils/modalStyles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CardModal = ({\n  cardId,\n  open,\n  setOpen,\n  card,\n  list\n}) => {\n  _s();\n  const classes = useStyles();\n  const [title, setTitle] = useState(card.title);\n  const [description, setDescription] = useState(card.description);\n  const [file, setFile] = useState(null);\n  const [fileURL, setFileURL] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    setTitle(card.title);\n    setDescription(card.description);\n  }, [card]);\n  const onTitleDescriptionSubmit = async e => {\n    e.preventDefault();\n    dispatch(editCard(cardId, {\n      title,\n      description\n    }));\n  };\n  const onArchiveCard = async () => {\n    dispatch(archiveCard(cardId, true));\n    setOpen(false);\n  };\n  const onFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n  const uploadFile = async () => {\n    if (file) {\n      setLoading(true);\n      try {\n        const formData = new FormData();\n        formData.append(\"multimedia\", file);\n\n        // Aquí debes realizar la llamada a tu servidor para subir el archivo\n        // Reemplaza esta llamada ficticia con tu lógica real de carga de archivos\n        // Supongamos que la URL de tu endpoint de carga de archivos es '/api/upload'\n        const response = await fetch(\"/api/upload\", {\n          method: \"POST\",\n          body: formData\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setFileURL(data.url);\n        } else {\n          console.error(\"Error al subir el archivo\");\n        }\n      } catch (error) {\n        console.error(\"Error al subir el archivo:\", error);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    open: open,\n    onClose: () => setOpen(false),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${classes.paper} ${classes.cardModal}`,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => onTitleDescriptionSubmit(e),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.modalTop,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            margin: \"normal\",\n            required: true,\n            fullWidth: true,\n            multiline: true,\n            label: \"Card title\",\n            value: title,\n            onChange: e => setTitle(e.target.value),\n            onKeyPress: e => e.key === \"Enter\" && onTitleDescriptionSubmit(e),\n            className: classes.cardTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setOpen(false),\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          fullWidth: true,\n          multiline: true,\n          label: \"Card description\",\n          value: description,\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: onFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 23\n        }, this), fileURL && /*#__PURE__*/_jsxDEV(\"a\", {\n          href: fileURL,\n          target: \"_blank\",\n          children: file.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          onClick: uploadFile,\n          children: \"Subir archivo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          disabled: title === card.title && (description === card.description || description === \"\" && !card.description),\n          className: classes.button,\n          children: \"Guardar todos los cambios\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(CardModal, \"2/VebBilzek0QM5seOoBJnJFBRE=\", false, function () {\n  return [useStyles, useDispatch];\n});\n_c = CardModal;\nCardModal.propTypes = {\n  cardId: PropTypes.string.isRequired,\n  open: PropTypes.bool.isRequired,\n  setOpen: PropTypes.func.isRequired,\n  card: PropTypes.object.isRequired,\n  list: PropTypes.object.isRequired\n};\nexport default CardModal;\nvar _c;\n$RefreshReg$(_c, \"CardModal\");","map":{"version":3,"names":["React","useState","useEffect","useDispatch","PropTypes","editCard","archiveCard","Modal","TextField","Button","CircularProgress","CloseIcon","useStyles","jsxDEV","_jsxDEV","CardModal","cardId","open","setOpen","card","list","_s","classes","title","setTitle","description","setDescription","file","setFile","fileURL","setFileURL","loading","setLoading","dispatch","onTitleDescriptionSubmit","e","preventDefault","onArchiveCard","onFileChange","target","files","uploadFile","formData","FormData","append","response","fetch","method","body","ok","data","json","url","console","error","onClose","children","className","paper","cardModal","onSubmit","modalTop","variant","margin","required","fullWidth","multiline","label","value","onChange","onKeyPress","key","cardTitle","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","href","name","color","disabled","button","_c","propTypes","string","isRequired","bool","func","object","$RefreshReg$"],"sources":["C:/Users/jessi/OneDrive/Escritorio/PRACTICAS SAID/contenedor padlet/padlet/frontend/client/src/components/card/CardModal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport { editCard, archiveCard } from \"../../actions/board\";\r\nimport { Modal, TextField, Button, CircularProgress } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../../utils/modalStyles\";\r\n\r\nconst CardModal = ({ cardId, open, setOpen, card, list }) => {\r\n  const classes = useStyles();\r\n  const [title, setTitle] = useState(card.title);\r\n  const [description, setDescription] = useState(card.description);\r\n  const [file, setFile] = useState(null);\r\n  const [fileURL, setFileURL] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    setTitle(card.title);\r\n    setDescription(card.description);\r\n  }, [card]);\r\n\r\n  const onTitleDescriptionSubmit = async (e) => {\r\n    e.preventDefault();\r\n    dispatch(editCard(cardId, { title, description }));\r\n  };\r\n\r\n  const onArchiveCard = async () => {\r\n    dispatch(archiveCard(cardId, true));\r\n    setOpen(false);\r\n  };\r\n\r\n  const onFileChange = (e) => {\r\n    setFile(e.target.files[0]);\r\n  };\r\n\r\n  const uploadFile = async () => {\r\n    if (file) {\r\n      setLoading(true);\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append(\"multimedia\", file);\r\n\r\n        // Aquí debes realizar la llamada a tu servidor para subir el archivo\r\n        // Reemplaza esta llamada ficticia con tu lógica real de carga de archivos\r\n        // Supongamos que la URL de tu endpoint de carga de archivos es '/api/upload'\r\n        const response = await fetch(\"/api/upload\", {\r\n          method: \"POST\",\r\n          body: formData,\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setFileURL(data.url);\r\n        } else {\r\n          console.error(\"Error al subir el archivo\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error al subir el archivo:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal open={open} onClose={() => setOpen(false)}>\r\n      <div className={`${classes.paper} ${classes.cardModal}`}>\r\n        <form onSubmit={(e) => onTitleDescriptionSubmit(e)}>\r\n          <div className={classes.modalTop}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              multiline\r\n              label=\"Card title\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              onKeyPress={(e) =>\r\n                e.key === \"Enter\" && onTitleDescriptionSubmit(e)\r\n              }\r\n              className={classes.cardTitle}\r\n            />\r\n            <Button onClick={() => setOpen(false)}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </div>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            multiline\r\n            label=\"Card description\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          />\r\n          <input type=\"file\" onChange={onFileChange} />\r\n          {loading && <CircularProgress />}\r\n          {fileURL && (\r\n            <a href={fileURL} target=\"_blank\">\r\n              {file.name}\r\n            </a>\r\n          )}\r\n          <Button variant=\"contained\" color=\"secondary\" onClick={uploadFile}>\r\n            Subir archivo\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={\r\n              title === card.title &&\r\n              (description === card.description ||\r\n                (description === \"\" && !card.description))\r\n            }\r\n            className={classes.button}\r\n          >\r\n            Guardar todos los cambios\r\n          </Button>\r\n        </form>\r\n        {/* Resto del contenido del modal */}\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nCardModal.propTypes = {\r\n  cardId: PropTypes.string.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  setOpen: PropTypes.func.isRequired,\r\n  card: PropTypes.object.isRequired,\r\n  list: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default CardModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}