{"ast":null,"code":"import React,{useState}from'react';import{Redirect}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{login}from'../../actions/auth';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import Link from'@material-ui/core/Link';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import Typography from'@material-ui/core/Typography';import Container from'@material-ui/core/Container';import Alert from'@material-ui/lab/Alert';// Importar componente de alerta de Material-UI\nimport Snackbar from'@material-ui/core/Snackbar';// Importar componente de Snackbar\nimport IconButton from'@material-ui/core/IconButton';import CloseIcon from'@material-ui/icons/Close';import useStyles from'../../utils/formStyles';import{loadUser}from'../../actions/auth.js';import{REGISTER_SUCCESS,REGISTER_FAIL,USER_LOADED,AUTH_ERROR,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT}from'../../actions/types.js';// Inicio Google\nimport{useGoogleLogin}from'@react-oauth/google';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const classes=useStyles();const[formData,setFormData]=useState({email:'',password:''});const[openAlert,setOpenAlert]=useState(false);// Estado para controlar la visibilidad de la alerta\nconst isAuthenticated=useSelector(state=>state.auth.isAuthenticated);const dispatch=useDispatch();const{email,password}=formData;const onChange=e=>setFormData({...formData,[e.target.name]:e.target.value});const onSubmit=async e=>{e.preventDefault();dispatch(login(email,password));setOpenAlert(true);// Mostrar la alerta después de iniciar sesión\n};const loginGoogle=useGoogleLogin({onSuccess:tokenResponse=>{console.log(tokenResponse);dispatch({type:LOGIN_SUCCESS,payload:email});//dispatch(loadUser());\n},onError:error=>console.log('Login Failed:',error)});const handleCloseAlert=(event,reason)=>{if(reason==='clickaway'){return;}setOpenAlert(false);// Cerrar la alerta\n};if(isAuthenticated){return/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"});}return/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",className:classes.container,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paper,children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",children:\"Gestor de Proyectos\"}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Iniciar Sesion\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,onSubmit:e=>onSubmit(e),children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,label:\"Correo\",name:\"email\",autoComplete:\"email\",autoFocus:true,value:email,onChange:e=>onChange(e)}),/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Contrase\\xF1a\",type:\"password\",autoComplete:\"current-password\",value:password,onChange:e=>onChange(e)}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,children:\"Iniciar Sesion\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>loginGoogle(),fullWidth:true,variant:\"contained\",color:\"secondary\",children:\"Iniciar Sesi\\xF3n con Google\"}),/*#__PURE__*/_jsx(Grid,{container:true,justify:\"flex-end\",children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Link,{href:\"/register\",variant:\"body2\",children:\"No tienes cuenta? Registrarse\"})})})]})]}),/*#__PURE__*/_jsx(Box,{mt:8,children:/*#__PURE__*/_jsx(Snackbar,{anchorOrigin:{vertical:'top',horizontal:'center'},open:openAlert,autoHideDuration:15000,onClose:handleCloseAlert,children:/*#__PURE__*/_jsx(Alert,{onClose:handleCloseAlert,severity:\"success\",variant:\"filled\",action:/*#__PURE__*/_jsx(IconButton,{size:\"small\",\"aria-label\":\"close\",color:\"inherit\",onClick:handleCloseAlert,children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"small\"})}),children:\"Inicio de sesi\\xF3n exitoso\"})})})]});};export default Login;","map":{"version":3,"names":["React","useState","Redirect","useSelector","useDispatch","login","Button","CssBaseline","TextField","Link","Grid","Box","Typography","Container","Alert","Snackbar","IconButton","CloseIcon","useStyles","loadUser","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","useGoogleLogin","jsx","_jsx","jsxs","_jsxs","Login","classes","formData","setFormData","email","password","openAlert","setOpenAlert","isAuthenticated","state","auth","dispatch","onChange","e","target","name","value","onSubmit","preventDefault","loginGoogle","onSuccess","tokenResponse","console","log","type","payload","onError","error","handleCloseAlert","event","reason","to","component","maxWidth","className","container","children","paper","variant","form","margin","required","fullWidth","label","autoComplete","autoFocus","color","submit","onClick","justify","item","href","mt","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","severity","action","size","fontSize"],"sources":["D:/David/Escritorio/CHAMBA/Gestor-de-proyectos/frontend/client/src/components/pages/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { login } from '../../actions/auth';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport Alert from '@material-ui/lab/Alert'; // Importar componente de alerta de Material-UI\r\nimport Snackbar from '@material-ui/core/Snackbar'; // Importar componente de Snackbar\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport useStyles from '../../utils/formStyles';\r\n\r\nimport { loadUser } from '../../actions/auth.js';\r\n\r\nimport {\r\n  REGISTER_SUCCESS,\r\n  REGISTER_FAIL,\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n} from '../../actions/types.js';\r\n\r\n// Inicio Google\r\nimport { useGoogleLogin } from '@react-oauth/google';\r\n\r\nconst Login = () => {\r\n  const classes = useStyles();\r\n\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const [openAlert, setOpenAlert] = useState(false); // Estado para controlar la visibilidad de la alerta\r\n  const isAuthenticated = useSelector((state) => state.auth.isAuthenticated);\r\n  const dispatch = useDispatch();\r\n\r\n  const { email, password } = formData;\r\n\r\n  const onChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value });\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    dispatch(login(email, password));\r\n    setOpenAlert(true); // Mostrar la alerta después de iniciar sesión\r\n  };\r\n\r\n  const loginGoogle = useGoogleLogin({\r\n    onSuccess: (tokenResponse) => {\r\n      console.log(tokenResponse);\r\n      dispatch({\r\n        type: LOGIN_SUCCESS,\r\n        payload: email,\r\n      });\r\n\r\n      //dispatch(loadUser());\r\n  \r\n    },\r\n    onError: (error) => console.log('Login Failed:', error),\r\n  });\r\n  \r\n\r\n\r\n  const handleCloseAlert = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpenAlert(false); // Cerrar la alerta\r\n  };\r\n\r\n  if (isAuthenticated) {\r\n    return <Redirect to='/dashboard' />;\r\n  }\r\n\r\n  \r\n  return (\r\n    <Container component='main' maxWidth='xs' className={classes.container}>\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Typography component='h1' variant='h4'>\r\n          Gestor de Proyectos\r\n        </Typography>\r\n        <Typography component='h1' variant='h5'>\r\n          Iniciar Sesion\r\n        </Typography>\r\n        <form className={classes.form} onSubmit={(e) => onSubmit(e)}>\r\n          <TextField\r\n            variant='outlined'\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            label='Correo'\r\n            name='email'\r\n            autoComplete='email'\r\n            autoFocus\r\n            value={email}\r\n            onChange={(e) => onChange(e)}\r\n          />\r\n          <TextField\r\n            variant='outlined'\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            name='password'\r\n            label='Contraseña'\r\n            type='password'\r\n            autoComplete='current-password'\r\n            value={password}\r\n            onChange={(e) => onChange(e)}\r\n          />\r\n          <Button\r\n            type='submit'\r\n            fullWidth\r\n            variant='contained'\r\n            color='primary'\r\n            className={classes.submit}\r\n          >\r\n            Iniciar Sesion\r\n          </Button>\r\n\r\n\r\n          <Button\r\n            onClick={() => loginGoogle()}\r\n            fullWidth\r\n            variant='contained'\r\n            color='secondary'\r\n          >\r\n            Iniciar Sesión con Google\r\n          </Button>\r\n\r\n          <Grid container justify='flex-end'>\r\n            <Grid item>\r\n              <Link href='/register' variant='body2'>\r\n                No tienes cuenta? Registrarse\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'center',\r\n          }}\r\n          open={openAlert}\r\n          autoHideDuration={15000}\r\n          onClose={handleCloseAlert}\r\n        >\r\n          <Alert\r\n            onClose={handleCloseAlert}\r\n            severity='success'\r\n            variant='filled'\r\n            action={\r\n              <IconButton size='small' aria-label='close' color='inherit' onClick={handleCloseAlert}>\r\n                <CloseIcon fontSize='small' />\r\n              </IconButton>\r\n            }\r\n          >\r\n            Inicio de sesión exitoso\r\n          </Alert>\r\n        </Snackbar>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}