{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useSelector,useDispatch}from'react-redux';import{addMember}from'../../actions/board';import getInitials from'../../utils/getInitials';import{TextField,Button}from'@material-ui/core';import Avatar from'@material-ui/core/Avatar';import Tooltip from'@material-ui/core/Tooltip';import Autocomplete from'@material-ui/lab/Autocomplete';import CloseIcon from'@material-ui/icons/Close';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Members=()=>{const[inviting,setInviting]=useState(false);const[user,setUser]=useState(null);const[inputValue,setInputValue]=useState('');const[users,setUsers]=useState([]);const boardMembers=useSelector(state=>state.board.board.members);const searchOptions=users.filter(user=>boardMembers.find(boardMember=>boardMember.user===user._id)?false:true);const dispatch=useDispatch();const handleInputValue=async newInputValue=>{setInputValue(newInputValue);if(newInputValue&&newInputValue!==''){const search=(await axios.get(\"/api/users/\".concat(newInputValue))).data.slice(0,5);setUsers(search&&search.length>0?search:[]);}};const onSubmit=async()=>{dispatch(addMember(user._id));setUser(null);setInputValue('');setInviting(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"board-members-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"board-members\",children:boardMembers.map(member=>{return/*#__PURE__*/_jsx(Tooltip,{title:member.name,children:/*#__PURE__*/_jsx(Avatar,{className:\"avatar\",children:getInitials(member.name)})},member.user);})}),!inviting?/*#__PURE__*/_jsx(Button,{className:\"invite\",variant:\"contained\",onClick:()=>setInviting(true),children:\"Invitar\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"invite\",children:[/*#__PURE__*/_jsx(Autocomplete,{value:user,onChange:(e,newMember)=>setUser(newMember),inputValue:inputValue,onInputChange:(e,newInputValue)=>handleInputValue(newInputValue),options:searchOptions,getOptionLabel:member=>member.email,className:\"search-member\",renderInput:params=>/*#__PURE__*/_jsx(TextField,{...params,helperText:\"Search for user by email\",autoFocus:true})}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-member\",children:[/*#__PURE__*/_jsx(Button,{disabled:!user,variant:\"contained\",color:\"primary\",onClick:onSubmit,children:\"A\\xF1adir miembro\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setInviting(false),children:/*#__PURE__*/_jsx(CloseIcon,{})})]})]})]});};export default Members;","map":{"version":3,"names":["React","useState","axios","useSelector","useDispatch","addMember","getInitials","TextField","Button","Avatar","Tooltip","Autocomplete","CloseIcon","jsx","_jsx","jsxs","_jsxs","Members","inviting","setInviting","user","setUser","inputValue","setInputValue","users","setUsers","boardMembers","state","board","members","searchOptions","filter","find","boardMember","_id","dispatch","handleInputValue","newInputValue","search","get","concat","data","slice","length","onSubmit","className","children","map","member","title","name","variant","onClick","value","onChange","e","newMember","onInputChange","options","getOptionLabel","email","renderInput","params","helperText","autoFocus","disabled","color"],"sources":["D:/David/Escritorio/CHAMBA/Gestor-de-proyectos/frontend/client/src/components/board/Members.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { addMember } from '../../actions/board';\r\nimport getInitials from '../../utils/getInitials';\r\nimport { TextField, Button } from '@material-ui/core';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n\r\nconst Members = () => {\r\n  const [inviting, setInviting] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [users, setUsers] = useState([]);\r\n  const boardMembers = useSelector((state) => state.board.board.members);\r\n  const searchOptions = users.filter((user) =>\r\n    boardMembers.find((boardMember) => boardMember.user === user._id) ? false : true\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  const handleInputValue = async (newInputValue) => {\r\n    setInputValue(newInputValue);\r\n    if (newInputValue && newInputValue !== '') {\r\n      const search = (await axios.get(`/api/users/${newInputValue}`)).data.slice(0, 5);\r\n      setUsers(search && search.length > 0 ? search : []);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async () => {\r\n    dispatch(addMember(user._id));\r\n    setUser(null);\r\n    setInputValue('');\r\n    setInviting(false);\r\n  };\r\n\r\n  return (\r\n    <div className='board-members-wrapper'>\r\n      <div className='board-members'>\r\n        {boardMembers.map((member) => {\r\n          return (\r\n            <Tooltip title={member.name} key={member.user}>\r\n              <Avatar className='avatar'>{getInitials(member.name)}</Avatar>\r\n            </Tooltip>\r\n          );\r\n        })}\r\n      </div>\r\n      {!inviting ? (\r\n        <Button className='invite' variant='contained' onClick={() => setInviting(true)}>\r\n          Invitar\r\n        </Button>\r\n      ) : (\r\n        <div className='invite'>\r\n          <Autocomplete\r\n            value={user}\r\n            onChange={(e, newMember) => setUser(newMember)}\r\n            inputValue={inputValue}\r\n            onInputChange={(e, newInputValue) => handleInputValue(newInputValue)}\r\n            options={searchOptions}\r\n            getOptionLabel={(member) => member.email}\r\n            className='search-member'\r\n            renderInput={(params) => (\r\n              <TextField {...params} helperText='Search for user by email' autoFocus />\r\n            )}\r\n          />\r\n          <div className='add-member'>\r\n            <Button\r\n              disabled={!user}\r\n              variant='contained'\r\n              color='primary'\r\n              onClick={onSubmit}\r\n            >\r\n              AÃ±adir miembro\r\n            </Button>\r\n            <Button onClick={() => setInviting(false)}>\r\n              <CloseIcon />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Members;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}